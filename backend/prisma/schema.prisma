generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int      @id @default(autoincrement())
  name     String
  email    String   @unique
  password String
  treinos  Treino[]
}

model Treino {
  id          Int               @id @default(autoincrement())
  titulo      String
  data        DateTime
  user        User              @relation(fields: [userId], references: [id])
  userId      Int
  exercicios  TreinoExercicio[]
  descanso    Int? // 1-10, opcional
  alimentacao Int? // 1-10, opcional
  humor       Int? // 1-10, opcional
  esforco     Int? // 1-10, opcional (esforço entre séries)
  observacoes String? // Anotações extras, opcional
  notes       Note[] // Notas gerais associadas ao treino
}

model Exercise {
  id       Int               @id @default(autoincrement())
  name     String            @unique
  photoUrl String? // URL da imagem, opcional
  musculo  String?
  treinos  TreinoExercicio[]
}

model TreinoExercicio {
  id         Int      @id @default(autoincrement())
  treino     Treino   @relation(fields: [treinoId], references: [id])
  treinoId   Int
  exercise   Exercise @relation(fields: [exerciseId], references: [id])
  exerciseId Int
  carga      Int
  series     Serie[] // Relação 1:N com séries
}

model Serie {
  id                Int             @id @default(autoincrement())
  treinoExercicio   TreinoExercicio @relation(fields: [treinoExercicioId], references: [id])
  treinoExercicioId Int
  tipoSerie         String
  carga             Int
  reps              Int
}

model Note {
  id       Int     @id @default(autoincrement())
  content  String
  treinoId Int? // pode ser nulo
  treino   Treino? @relation(fields: [treinoId], references: [id])
}
